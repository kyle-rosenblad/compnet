<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Network models of interspecific competition with presence-absence data"><title>Network models of interspecific competition with presence-absence data — buildcompnet • compnet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Network models of interspecific competition with presence-absence data — buildcompnet"><meta property="og:description" content="Network models of interspecific competition with presence-absence data"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">compnet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/compnet_workflow.html">The 'compnet' workflow</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Network models of interspecific competition with presence-absence data</h1>
      
      <div class="d-none name"><code>buildcompnet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Network models of interspecific competition with presence-absence data</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">buildcompnet</span><span class="op">(</span></span>
<span>  <span class="va">presabs</span>,</span>
<span>  spvars_no_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spvars_dist_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spvars_multi_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spvars_cat_no_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spvars_cat_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pairvars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"binomial"</span>,</span>
<span>  rank <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  prior_intercept_scale <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  prior_betas_scale <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  prior_sigma_addeff_rate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prior_multi_cholesky_eta <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  prior_sigma_multi_shape <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prior_sigma_multi_scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prior_lambda_scale <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  prior_phi_rate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  adapt_delta <span class="op">=</span> <span class="fl">0.8</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>presabs</dt>
<dd><p>Must be specified by user. Binary (0 or 1) presence-absence matrix with sites as
rows and species as columns. Column names should be unique species names.</p></dd>


<dt>spvars_no_int</dt>
<dd><p>A matrix or data frame, in which rows are species and columns are traits to
be included in the model as additive species effects only, with no interaction term. Row names
should be unique species names, and column names should be unique trait names.</p></dd>


<dt>spvars_dist_int</dt>
<dd><p>A matrix or data frame, in which rows are species and columns are traits
to be included in the model with a distance interaction term (i.e., the absolute value of the
difference in trait values for each species pair). Row names should be unique species names,
and column names should be unique trait names.</p></dd>


<dt>spvars_multi_int</dt>
<dd><p>A matrix or data frame, in which rows are species and columns are traits
to be included in the model with a multiplicative interaction term (i.e., the product of the
trait values for each species pair). Row names should be unique species names, and column
names should be unique trait names.</p></dd>


<dt>spvars_cat_no_int</dt>
<dd><p>A matrix or data frame, in which rows are species and columns are categorical traits to
be included in the model as additive species effects only, with no interaction term. Row names
should be unique species names, and column names should be unique trait names.</p></dd>


<dt>spvars_cat_int</dt>
<dd><p>A matrix or data frame, in which rows are species and columns are categorical traits to
be included in the model with a binary "same or different" interaction term. Row names
should be unique species names, and column names should be unique trait names.</p></dd>


<dt>pairvars</dt>
<dd><p>A matrix or data frame, in which rows are species pairs and columns are
pair-level traits that do not have a species-level analog, e.g., phylogenetic distance.
Row names should be unique species names, and column names should be unique trait names. There
should also be two columns named "spAid" and "spBid" containing the unique names of the
species in each pair.</p></dd>


<dt>family</dt>
<dd><p>Distribution family for the likelihood. Binomial (default), beta-binomial ("beta-binomial"),
and zero-inflated binomial ("zi_binomial") are currently supported.</p></dd>


<dt>rank</dt>
<dd><p>Number of dimensions for the multiplicative latent factor term. Rank=0 (the default)
yields a model with no multiplicative term.</p></dd>


<dt>prior_intercept_scale</dt>
<dd><p>Scale parameter for mean-zero Gaussian prior on the intercept term
for the linear predictor.</p></dd>


<dt>prior_betas_scale</dt>
<dd><p>Scale parameter for mean-zero Gaussian priors on the coefficients of
fixed effect terms in the linear predictor.</p></dd>


<dt>prior_sigma_addeff_rate</dt>
<dd><p>Rate parameter for exponential prior on the scale of the
species-level Gaussian random effects (i.e., "row and column effects").</p></dd>


<dt>prior_multi_cholesky_eta</dt>
<dd><p>Eta parameter for Cholesky LKJ prior determining correlations
among latent factors. Larger values imply greater skepticism of strong correlations.</p></dd>


<dt>prior_sigma_multi_shape</dt>
<dd><p>Shape parameter for gamma prior on scale of multiplicative
latent factor effects.</p></dd>


<dt>prior_sigma_multi_scale</dt>
<dd><p>Scale parameter for gamma prior on scale of multiplicative
latent factor effects.</p></dd>


<dt>prior_lambda_scale</dt>
<dd><p>Scale parameter for mean-zero Gaussian prior on diagonal values of
Lambda, the matrix that determines how different species' values of the latent factors
interact in the linear predictor.</p></dd>


<dt>prior_phi_rate</dt>
<dd><p>Rate parameter for exponential prior on phi, the "over/under-dispersion parameter"
in beta-binomial models.</p></dd>


<dt>warmup</dt>
<dd><p>Number of warmup iterations for Stan.</p></dd>


<dt>iter</dt>
<dd><p>Number of posterior sampling iterations for Stan.</p></dd>


<dt>adapt_delta</dt>
<dd><p>A parameter that tunes Stan's posterior sampling algorithm. Increasing closer to 1 can help avoid divergent transitions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Object of class "compnet", which is a list containing the stanfit model object,
a named list of posterior samples for all model parameters, a data frame containing all
input variables for the model, a matrix of dyadic X variables, a matrix of X variables
pertaining to species A in each pair, a matrix of X variables pertaining to species B in
each pair, a character string denoting the distribution family, and--when relevant--a matrix
of means and standard deviations for the input trait data before centering and scaling.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses Stan, as accessed through the rstan package, to build a network
regression model of interspecific competitive niche differentiation in a Bayesian framework.
This function is designed to test the hypothesis that species are more likely to co-occur with
other species that are functionally dissimilar. Functional dissimilarity can be represented
directly by traits or by a proxy like phylogenetic distance. The core input data are a
species-by-site presence-absence matrix and one or more species-level traits
(e.g., plant leaf size) or pair-level traits (e.g., phylogenetic distance). Units of analysis
are species pairs. The response variable can follow a binomial, beta-binomial, or zero-inflated
binomial distribution. The number of trials is the number of sites occupied by at least one
species in a pair, and the number of successes is the number of sites occupied by both species.
If species-level traits are used, each trait can be non-interacting
(i.e., there is no interaction term between species A's trait value and species B's),
interacting via a typical multiplicative term, or interacting via an absolute value difference
(i.e., "distance") term. The interaction terms are key to the core hypothesis. If competitive
niche differentiation is occurring, then the probability of co-occurrence is expected to
increase with trait or phylogenetic distance between species A and B, or with the product of
their trait values, if a multiplicative interaction is specified instead of a distance interaction.
Random effects are used to account for additive species-level dependencies and, optionally,
higher-order dependencies involving multiple species (e.g., "the enemy of my enemy is my friend").
Higher-order dependencies are modeled using a number of latent variable specified by "rank".
For more details on the random effects, see Hoff, P. (2021) Additive and multiplicative effects
network models. Stat. Sci. 36, 34–50.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ex_presabs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ex_traits</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Quick demo run. Will prompt warnings.</span></span></span>
<span class="r-in"><span><span class="co"># Run with default warmup and iter for good posterior sampling.</span></span></span>
<span class="r-in"><span><span class="va">ex_compnet</span> <span class="op">&lt;-</span> <span class="fu">buildcompnet</span><span class="op">(</span>presabs<span class="op">=</span><span class="va">ex_presabs</span>, spvars_dist_int<span class="op">=</span><span class="va">ex_traits</span>, warmup<span class="op">=</span><span class="fl">10</span>, iter<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in colMeans(x, na.rm = TRUE):</span> 'x' must be numeric</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kyle Rosenblad.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

